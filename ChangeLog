2006-12-29  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb,
	  src/rbosa.c:
	- Made the UTF8 strings optional and disabled by default ;
	- Fixed the TIFF conversion to OSA ;
	- Handle application errors and convert them as Ruby exceptions.

	* sample/iTunes_control.rb,
	  sample/iTunes_inspect.rb:
	Activate UTF8 strings.

2006-12-27  Laurent Sansonetti  <lsansonetti@apple.com>

	* NEWS:
	Revised for the next release.

	* src/lib/rbosa:
	Added 'class' to the list of reserved Ruby keywords to prefix when generating
	method parameters.

2006-12-27  Vincent Isambart  <vincent.isambart@gmail.com>

	* src/lib/rbosa.rb:
	- Fixed a bug when generating setter methods ;
	- Uses UTF8 strings by default.

2006-12-27  Laurent Sansonetti  <lsansonetti@apple.com>

	* sample/TextEdit_hello_world.rb:
	Removed experimental code.

2006-12-07  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	- Suffix method names that are already registered with an integer value
	  instead of prefixing with 'osa_' as there might be more than 2 duplicates ;
	- Register the ID property if not already defined.

2006-11-20  Jean-Pierre M.  <jeanpierre@gmail.com>

	* sample/iTunes_artwork.rb:
	Use the artwork format as the temporary file extension.

2006-11-20  Laurent Sansonetti  <lsansonetti@apple.com>

	* README:
	Revised.

	* src/rbosa.c:
	Make sure to swap the data of 'type' coerced descriptors.

	* src/lib/rbosa.rb:
	- Better translation of 'type' from OSA to Ruby ;
	- Support for some picture types ;
	- Fixed conversion handlers to not use 'self'.

	* sample/iTunes_artwork.rb,
	  sample/iChat_image.rb:
	Added new samples.

2006-11-19  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	- Convert four char codes to the Mac Roman encoding before using them,
	  as otherwise they could be considered as 5 bytes strings (ex. BBEdit) ;
	- Remove invalid characters when generating constants.

	* sample/Finder_show_desktop.rb,
	  sample/BBEdit_unix_script.rb:
	Added new samples.

2006-11-04  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Translate 'alis' OSA types to Ruby file paths.

2006-10-30  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb,
	  sample/*.rb:
	Changed the "require 'rubygems'..." expressions to make them compatible
	with Ruby 1.8.2. 

	* src/lib/rbosa.rb,
	  src/rbosa.c:
	Added support to convert Hash objects to OSA 'record' types.

2006-09-28  James MacAulay  <jmacaulay@gmail.com>

	* src/lib/rbosa.rb:
	- Reverted to 0.0.11 handling of 'comp' objects (unpacked as Quad integers 
	  again now) ;
	- Added handling for 'sing' objects (they're floats) ;
	- Added handling for when __type__ is 'type' and __data__ is 'msng'.
	  It seems that this is meant to suggest "missing" values, since this is 
	  exactly where they pop up in iTunes track properties (in an uninitialized
	  long_description, for example)...so I just made them turn into nils.

2006-10-28  Jean-Pierre M.  <jeanpierre@gmail.com>

	* sample/*.rb:
	Try to require 'rubygems' in samples, as RubyOSA may have been
	installed as a gem.

2006-10-28  Laurent Sansonetti  <lsansonetti@apple.com>

	* TODO:
	Updated.

	* src/lib/rbosa.rb:
	Fixed generated code for methods taking an enumeration-like parameter.
	This fixes #6350.

2006-10-27  Laurent Sansonetti  <lsansonetti@apple.com>

	* sample/iChat_uptime.rb:
	Better uptime string. Suggested by Tieg Zaharia.

=== RubyOSA 0.1.0 ===

2006-10-25  Sebastian Delmont  <sd@notso.net>

	* src/lib/rbosa.rb:
	Made the OSA <-> Ruby conversion hooks open.
	Patch was slightly modified by Laurent Sansonetti.

2006-10-25  Aaron Patterson  <aaron.patterson@gmail.com>

	* src/lib/rbosa.rb:
	Fall-back using REXML if libxml-ruby is not present.
	Patch was slightly modified by Laurent Sansonetti.

2006-10-25  Laurent Sansonetti  <lsansonetti@apple.com>

	* AUTHORS:
	Added Aaron.

	* rubyosa.gemspec,
	  bin/rdoc-osa,
	  rdoc-osa.rb:
	- Added RubyGems specification file ;
	- Moved the rdoc-osa tool to ./bin ;
	- Added support for 'type class' OSA parameters.

	* sample/TextEdit_hello_world.rb:
	Added new sample.

	* README:
	Revised.

	* src/rbosa.c:
	Do not inspect descriptors.

	* src/lib/rbosa.rb,
	  rdoc-osa.rb:
	- Retrieves documentation from the sdef ;
	- Added a new tool (rdoc-osa) that generates RDoc documentation for the
	  given application ;
	- Improved constant/method names generation.

	* sample/iTunes_control.rb:
	Follow new constant naming.

	* TODO:
	Revised.

2006-10-16  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb,
	  sample/*.rb:
	Added OSA.app as a convenience shortcut to OSA.app_with_name.
	Updated samples.

	* src/lib/rbosa.rb,
	  src/rbosa.c,
	  src/rbosa.h:
	- Added OSA accessors to control the Apple Event timeouts
	  and the lazy send mechanism (by default activated) ;
	- Added a convenience method (OSA.set_params) to set params
	  within the framework of a given closure.

2006-10-13  Laurent Sansonetti  <lsansonetti@apple.com>

	* README, TODO:
	Revisions for the first public release.

2006-10-11  Sebastian Delmont  <sd@notso.net>

	* src/lib/rbosa.rb:
	Fixed a bug in the code when handling optional 
	parameters. If a parameter is optional, defines
	all other parameters as optional.

2006-09-29  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb, src/rbosa.c:
	Added support for list of types parameters.

2006-09-28  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Print the debug messages only if $DEBUG is on.

	* AUTHORS:
	Added Sebastian and James.

2006-09-28  James MacAulay  <jmacaulay@gmail.com>

	* src/lib/rbosa.rb:
	Properly convert the 'comp' type to real 64-bit value.

2006-09-27  Sebastian Delmont  <sd@notso.net>

	* src/lib/rbosa.rb:
	Added support for the QuickDraw rectangle type.

2006-09-25  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Do not implicitly resolve 'reference'-typed objects.

2006-09-17  Laurent Sansonetti  <lsansonetti@apple.com>

	* TODO:
	Closed the libxml task.

2006-09-14  Laurent Sansonetti  <lsansonetti@apple.com>

	* README:
	Mention that libxml-ruby is now required.

	* src/lib/rbosa.rb:
	- Requires libxml-ruby and uses it to parse the sdef file ;
	- Fixed a bug where certain setter property methods were not
	  generated.

	* src/rbosa.c:
	s/OSA::Application/OSA::EventDispatcher.

2006-08-25  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Big change: try to minimize the send of apple events. We won't
	implicitly resolve object specifiers unless 1) a command is
	messaged 2) a primitive type (which is not defined in the sdef)
	is get 3) a property setter is messaged and 4) you explicitly
	call the #get method on the object. 

	* src/rbosa.c:
	Added OSA::Element#inspect that prints the contents of the
	embedded descriptor.

2006-08-24  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/rbosa.c:
	- Added OSA::Element#==() that compares the descriptors data ;
	- Make sure we rb_fatal() when we can't allocate memory ;
	- When guessing classes, do some sanity checks before, and 
	  cleaned the byte swapping part ;
	- Cleaned the four char code to string conversions. 

	* src/lib/rbosa.rb:
	Don't override existing methods, prefixing the generated 
	method names with 'osa_' when necessary. When mapping the
	commands, filter the classes to only take the oldest ones in
	the hierarchy.

2006-08-23  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	When converting to alias or file types, provide a 'furl' 
	descriptor instead of an 'alis' one, as we don't have a way
	to create an alias for a file that does not exist yet.

2006-08-22  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb, src/rbosa.c:
	- Added support for 'reco' types, that are now translated into
	  Ruby Hash objects ;
	- Convert 'type' types to real generated classes (if possible).

2006-08-22  Vincent Isambart  <vincent.isambart@gmail.com>

	* src/lib/rbosa.rb, src/rbosa.c:
	Set the @app instance variable to self for application instances,
	and cleanup the generated methods code logic to always use it.

2006-08-22  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Handle 'file' element types as aliases.

	* src/rbosa_sdef.c:
	- Don't try to get the app name when OSA.app_with_name() was called,
	  as we already have it ;
	- When trying to get the app name, if CFBundleName does not exist in
	  the Info.plist file, try for CFBundleExecutable.

2006-08-22  Vincent Isambart  <vincent.isambart@gmail.com>

	* src/lib/rbosa.rb:
	- Map '-', '/' and '.' to underscores, and '&' to 'and' when rubyfy'ing 
	  strings (Finder and QuickTime do have these characters) ; 
	- Ignore commands whose names contain 'NOT AVAILABLE' (Finder on Tiger 
	  has some) ; 
	- When creating classes, make sure we iterate on all elements (as some
	  classes can be defined within multiple suites) ;
	- Use Module#const_set instead of costly evals to define constants.

	* sample/QT_playall.rb:
	Added new sample.

2006-08-22  Laurent Sansonetti  <lsansonetti@apple.com>

	* AUTHORS:
	Added.

2006-08-10  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Fix latest fix.

	* src/rbosa.c:
	Removed unnecessary comment.    

2006-08-08  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	Cache the application objects so that we never create them more than once.

	* src/rbosa_sdef.c:
	Fixed the OSA.app_with_signature() method.

	* tests/tc_get_app.rb, tests/testall.rb:
	Added some test cases.

	* src/rbosa_conv.c:
	Raise an exception if an URL could not be created with the given file
	path (reported by Michael Pruett).

2006-07-26  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/rbosa.c, src/rbosa_sdef.c, src/lib/rbosa.rb:
	- The application class does not inherit from OSA::Application anymore,
	  as in some sdef it inherits from another class. OSA::Application has
	  been transformed as a module and is mixed in the class instead ;
	- Fixed the sdef retrieval method to generate a Ruby string with the
	  exact length of the given data, to avoid garbage at the end of the XML
	  definition that can sometimes make REXML a bit nervous.

2006-07-23  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	- Map direct-specifier-optional commands to the application class ;
	- Do not override methods if they are already defined.

    * sample/iTunes_fade_volume.rb:
	Fixed the iTunes_fade_volume.rb sample to call app#play ;

2006-07-19  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb, src/rbosa.c, src/rbosa.h, src/rbosa_conv.c:
	- Fixed methods with direct-parameter mapped to the application class ;
	- Do not warn for classes that inherit from themselves (not a bug) ;
	- Added support for aliases (Ruby String -> Carbon AliasHandle) ;
	- Fixed integers-packed-into-string arguments handling ;
	- Handle 'text' element types as strings.

	* sample/iTunes_fade_volume.rb:
	New sample.

2006-07-13  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/rbosa.c, src/lib/rbosa.rb:
	- Do not overwrite new class constants if they already exist ;
	- When a class in the sdef inherits from a class that is not 
	  defined, raises a warning and falls back on OSA::Element.
	- When guessing the class type of an object specifier, make sure
	  we don't check more than 4 characters.

	* sample/iChat_uptime.rb:
	New sample.

2006-07-12  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb:
	- Prefix generated constant names with a 'C' in case the name starts
	  with an digit, to avoid an exception ;
	- Added write-support for properties ;
	- Fixed AE -> Ruby boolean type conversion ;
	- When passing parameters, check if OSA::Element objects are given 
	  and use them instead of creating new ones.

	* sample/iTunes_control.rb:
	Use the mute property.

	* TODO:
	- Updated to mention events timeout ;
	- Closed the 'write-support' point.

2006-07-11  Laurent Sansonetti  <lsansonetti@apple.com>

	* extconf.rb, src/rbosa.h:
	Generate modified Ruby headers at build time to avoid symbol
	collisions (ID, T_DATA).

2006-07-10  Laurent Sansonetti  <lsansonetti@apple.com>

	* sample/iTunes_control.rb:
	Reverted last change since it does not seem to work... print a message
	in the meantime we don't support write operations.

	* src/lib/rbosa.rb:
	Do not print warning messages unless $VERBOSE is set.

	* src/lib/rbosa.rb, src/rbosa.c, src/rbosa.h, src/rbosa_conv.c:
	Added x86 support (fixed FourCharCode swapping issues).

2006-07-05  Laurent Sansonetti  <lsansonetti@apple.com>

	* src/lib/rbosa.rb, src/rbosa.c, src/rbosa_sdef.c, src/rbosa.h,
	  sample/sdef.rb, sample/iTunes_control.rb, sample/iTunes_inspect.rb:
	API change: OSA.app() is splited in 4 sub-methods: OSA.app_with_name(),
	OSA.app_with_path(), OSA.app_with_bundle_id() and OSA.app_with_signature.

	* src/lib/rbosa.rb:
	Convert null elements to nil (fix by Vincent Isambart).

	* sample/iTunes_control.rb:
	When starting and if there is currently no track, select the first one 
	and play it.

	* TODO:
	Reformat.

2006-06-27  Laurent Sansonetti  <lsansonetti@apple.com>

	* COPYRIGHT, ChangeLog, README, TODO, extconf.rb, 
	  sample/iTunes_control.rb, sample/iTunes_inspect.rb, sample/sdef.rb, 
	  src/rbosa.c, src/rbosa.h, src/rbosa_conv.c, src/rbosa_sdef.c, 
	  lib/rbosa.rb:
	Initial RubyForge revision.
